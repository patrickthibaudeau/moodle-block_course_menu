define("block_course_menu/menu_builder",["exports","jquery","jqueryui","core/ajax","core/modal_factory","core/modal_events","core/str"],(function(_exports,_jquery,_jqueryui,_ajax,_modal_factory,_modal_events,_str){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_jquery=_interopRequireDefault(_jquery),_jqueryui=_interopRequireDefault(_jqueryui),_ajax=_interopRequireDefault(_ajax),_modal_factory=_interopRequireDefault(_modal_factory),_modal_events=_interopRequireDefault(_modal_events);_exports.init=()=>{(0,_jquery.default)("button").on("click",(function(e){e.preventDefault()})),(0,_jquery.default)(".sections").sortable({cancel:"",cursor:"move",opacity:.4,placeholder:"sections-state-highlight",stop:function(event,ui){for(var itemOrder=(0,_jquery.default)(this).sortable("toArray"),i=0;i<itemOrder.length;i++){console.log(i+")"+itemOrder[i]),_ajax.default.call([{methodname:"block_course_menu_update_section_sort_order",args:{id:itemOrder[i],sort_order:i}}])[0].done((function(){}))}}}),(0,_jquery.default)(".grid-list").sortable({cancel:"",cursor:"move",opacity:.4,placeholder:"buttons-state-highlight",stop:function(event,ui){for(var itemOrder=(0,_jquery.default)(this).sortable("toArray"),i=0;i<itemOrder.length;i++){console.log(i+")"+itemOrder[i]),_ajax.default.call([{methodname:"block_course_menu_update_button_sort_order",args:{id:itemOrder[i],sort_order:i}}])[0].done((function(){}))}}}),(0,_jquery.default)(".delete-item").on("click",(function(){let id=(0,_jquery.default)(this).data("id");_modal_factory.default.create({type:_modal_factory.default.types.SAVE_CANCEL,title:(0,_str.get_string)("delete_button","block_course_menu"),body:(0,_str.get_string)("delete_button_help","block_course_menu")}).then((function(modal){modal.setSaveButtonText((0,_str.get_string)("yes","block_course_menu")),modal.getRoot().on(_modal_events.default.save,(function(){_ajax.default.call([{methodname:"block_course_menu_delete_button",args:{id:id}}])[0].done((function(response){return location.reload()})).fail((function(ex){alert("An error has occurred. The record was not saved")}))})),console.log(_modal_events.default),modal.getRoot().on(_modal_events.default.cancel,(function(){})),modal.show()}))})),(0,_jquery.default)(".delete-section").on("click",(function(){let coursemenuid=(0,_jquery.default)(this).data("coursemenuid"),sortorder=(0,_jquery.default)(this).data("sectionorder");_modal_factory.default.create({type:_modal_factory.default.types.SAVE_CANCEL,title:(0,_str.get_string)("delete_section","block_course_menu"),body:(0,_str.get_string)("delete_section_help","block_course_menu")}).then((function(modal){modal.setSaveButtonText((0,_str.get_string)("yes","block_course_menu")),modal.getRoot().on(_modal_events.default.save,(function(){_ajax.default.call([{methodname:"block_course_menu_delete_section",args:{coursemenuid:coursemenuid,sortorder:sortorder}}])[0].done((function(response){return location.reload()})).fail((function(ex){alert("An error has occurred. The record was not saved")}))})),modal.getRoot().on(_modal_events.default.cancel,(function(){})),modal.show()}))}))}}));

//# sourceMappingURL=menu_builder.min.js.map